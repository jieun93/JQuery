<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>ajax_chainingEx</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="../json2js/json2.js"></script>
		<script>
		$(function(){
			
			$("button").click(function(){
				// jsp를 받아와서 data에 넣는거 
				$.ajax({
					url:"../data/result_chaining.jsp", // 요청 url
					datatype:"json", // 데이터를 받는 형식
					type :"post", // 요청 method 타입 
					data:"name="+$("#name").val() // 실제 요청 파라미터
						+"&add="+$("#add").val()
						+"&tel="+$("#tel").val()
						
						
				// get형식의 작성방법
				data :{"name":$("#name").val(),
						"add":$("#add").val(),
						"tel":$("#tel").val()
				
				}
						
				})
				// 실행시  창에 띄우는거 
				.done(function(data){
					
					data = data.trim();
					/*
					jsone.js 외부스크립트 파일 추가 
					- JSON.parse() : string to json객체
					- JSON.stringify() : json객체  to string
					
					*/
					var obj = JSON.parse(data);
					console.log(obj.name);
					$("body").append(obj.name);
					
					console.log(obj.add);
					$("body").append(obj.add);
					
					console.log(obj.tel);
					$("body").append(obj.tel);
					
				})
				// 실패시 창에 띄우는거 
				.fail(function(){
					console.log("fail");
					console.log("전송 실패 하였습니다.");
				}) ;
				
					
			});
			
			
		});
		
		
		
		
		</script>
	</head>
	
	<body>
		<!-- 
			해당하는 input 값을 result_chaining.jsp 파일에 post 방식으로 전송한다
			비동기 통신으로 값을 받아서 (done메서드 이용) body태그에 출력한다(전송 버튼 밑에 출력)
			
			만약,  전송 성공 또는 실패 했을 경우 
			맨 마지막에  "전송을 하였습니다." / "전송 실패 하였습니다."
			라고 출력해준다. 
		 -->
		  이름 : <input type="text" id="name"><br>
		 주소 : <input type="address" id="add"><br>
		 전화번호 : <input type="tel" id="tel"><br>
		 <button>전송</button> 
	
	</body>
</html>